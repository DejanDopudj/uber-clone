<div
  class="bg-slate-800 m-20 z-40 w-120 h-140 rounded-xl overflow-hidden flex ml-auto"
  [ngClass]="{ 'w-80': user.role !== 'ADMIN' }"
>
  <div
    *ngIf="user.role === 'ADMIN'"
    class="translate-y-12 w-40 bg-slate-800 select-none"
  >
    <ul role="list" class="w-full">
      <li
        *ngFor="let chat of chats"
        class="py-4 flex hover:bg-slate-700"
        (click)="changeMessages(chat.username)"
      >
        <div class="mx-3 truncate">
          <p class="text-sm font-medium text-white">
            {{ chat.username }}
          </p>
          <p class="text-sm text-gray-400">
            {{ chat.messages[chat.messages.length - 1].content }}
          </p>
        </div>
      </li>
    </ul>
  </div>
  <div class="bg-slate-700 z-40 w-80 overflow-hidden relative rounded-xl">
    <div class="flex h-12 bg-slate-800 my-auto justify-between select-none">
      <div
        class="text-lg text-white my-auto ml-4 border-b border-transparent hover:border-gray-500 truncate"
      >
        {{ chats[indexOfSelectedChat].username }}
      </div>
    </div>
    <div
      id="chat-scroll"
      class="h-[80%] text-sm overflow-auto overflow-y-scroll"
    >
      <div
        *ngFor="let msg of chats[indexOfSelectedChat].messages"
        class="overflow-x-hidden"
        id="listOfMessages"
      >
        <div *ngIf="msg.sender != user.username" class="text-left">
          <p
            style="max-width: 250px"
            class="inline-block text-left mt-3 ml-2 mr-6 px-4 py-2 bg-gray-50 rounded-xl break-words"
          >
            {{ msg.content }}
          </p>
          <div class="mx-4 text-gray-300 text-xs">
            {{
              msg.sentDateTime.toLocaleTimeString("en-GB", {
                hour: "numeric",
                minute: "numeric"
              })
            }}
          </div>
        </div>
        <div *ngIf="msg.sender == user.username" class="text-right">
          <p
            style="max-width: 250px"
            class="inline-block text-left mt-3 ml-6 mr-2 px-4 py-2 text-white rounded-xl break-words bg-red-500"
          >
            {{ msg.content }}
          </p>
          <div class="mx-4 text-gray-100 text-xs">
            {{
              msg.sentDateTime.toLocaleTimeString("en-GB", {
                hour: "numeric",
                minute: "numeric"
              })
            }}
          </div>
        </div>
      </div>
    </div>
    <div class="absolute bottom-0 h-12 px-2 w-full">
      <textarea
        id="chat-text-area"
        type="text"
        class="w-full py-1 bg-transparent rounded-xl border px-4 border-gray-100 text-white border-opacity-75 outline-none caret-gray-300 resize-none hidden-scrollbar"
        placeholder="Type message..."
        rows="1"
        [value]="newMessage"
        (keydown.enter)="addMessage()"
        (input)="onValueChange($event)"
      ></textarea>
    </div>
  </div>
</div>
